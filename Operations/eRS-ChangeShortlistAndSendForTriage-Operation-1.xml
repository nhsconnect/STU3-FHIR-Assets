<?xml version="1.0" encoding="utf-8"?>
<OperationDefinition xmlns="http://hl7.org/fhir">
  <id value="eRS-ChangeShortlistAndSendForTriage-Operation-1" />
  <url value="https://fhir.nhs.uk/STU3/OperationDefinition/eRS-ChangeShortlistAndSendForTriage-Operation-1" />
  <version value="1.0.0" />
  <name value="eRS-ChangeShortlistAndSendForTriage-Operation-1" />
  <status value="active" />
  <kind value="operation" />
  <date value="2022-03-10T00:00:00+00:00" />
  <publisher value="NHS Digital" />
  <contact>
    <name value="Interoperability Team" />
    <telecom>
      <system value="email" />
      <value value="interoperabilityteam@nhs.net" />
      <use value="work" />
    </telecom>
  </contact>
  <description value="Change the shortlist to a single triage service and send the referral for triage at the selected service." />
  <code value="ers.changeShortlistAndSendForTriage" />
  <system value="false" />
  <type value="false" />
  <instance value="true" />
  <parameter>
    <name value="shortlist" />
    <use value="in" />
    <min value="1" />
    <max value="1" />
    <documentation value="When sending for triage, the shortlist must contain exactly one service and this must support the ‘triage request flow’." />
    <type value="Resource" />
    <profile>
      <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" />
    </profile>
  </parameter>
  <parameter>
    <name value="firstReminderLetterFollowUpDays" />
    <use value="in" />
    <min value="1" />
    <max value="1" />
    <documentation value="This parameter triggers a reminder letter to the patient to prompt them to book an appointment if they haven’t done so after x days. When sending for triage, the only acceptable value is 0, which means no follow up letter will be sent, as the patient does not need to book an appointment." />
    <type value="unsignedInt" />
  </parameter>
  <parameter>
    <name value="intentionToAddReferralLetter" />
    <use value="in" />
    <min value="1" />
    <max value="1" />
    <documentation value="When sending for triage, a referral letter is always required; therefore if a referral letter has not been added then the only acceptable value is NEED_TO_ADD_LATER; if a referral letter has already been added then the only acceptable value is NOT_INTENDING_TO_ADD." />
    <type value="Coding" />
    <binding>
      <strength value="required" />
      <valueSetReference>
        <reference value="https://fhir.nhs.uk/STU3/ValueSet/eRS-ReferralLetterIntention-1" />
      </valueSetReference>
    </binding>
  </parameter>
  <parameter>
    <name value="updatedReferralRequest" />
    <use value="out" />
    <min value="1" />
    <max value="1" />
    <documentation value="The referral request that will be updated." />
    <type value="Resource" />
    <profile>
      <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" />
    </profile>
  </parameter>
  <parameter>
    <name value="createdAppointment" />
    <use value="out" />
    <min value="1" />
    <max value="1" />
    <documentation value="The newly created proposed appointment associated with the referral." />
    <type value="Resource" />
    <profile>
      <reference value="https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" />
    </profile>
  </parameter>
</OperationDefinition>